import { MAIN_NAV_DATA } from "../../../../helpers/constant";
import { type JSX, useState, useEffect } from "react";
import SelectLang from "./components/SelectLang";
import SelectTheme from "./components/SelectTheme";
import { useTranslation } from "react-i18next";
import { Logo } from "../../../../helpers/icons";
import { Button } from "../../../../components/ui/button";
import { MenuIcon } from "lucide-react";
import MenuResponsive from "./components/MenuResponsive";
import { Link, useLocation } from "react-router-dom";
import useTheme from "../../../../hooks/useTheme";

const MainNav = (): JSX.Element => {
  const { t } = useTranslation("common");
  const [isOpen, setIsOpen] = useState<boolean>(false);
  const [isAuthenticated, setIsAuthenticated] = useState<boolean>(false);
  const path = useLocation().pathname;

  const { theme } = useTheme();
  const isdark = theme === "dark";
  const handleToogle = () => {
    setIsOpen(!isOpen);
  };

  useEffect(() => {
    const token = localStorage.getItem("accessToken");
    setIsAuthenticated(!!token);
  }, []);

  return (
    <>
      <nav className="main-nav absolute top-0 left-0 z-40 w-full overflow-hidden">
        <div className="main-nav__container container flex items-center justify-between px-5 py-8">
          <div className="logo">
            {isdark ? (
              <Logo />
            ) : (
              <svg
                width="164"
                height="29"
                viewBox="0 0 164 29"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path d="M0.5 10.7652H21.4V28.5161H0.5V10.7652Z" fill="black" />
                <path
                  d="M0.5 10.7652C0.5 4.99383 5.17862 0.315208 10.95 0.315208C16.7214 0.315208 21.4 4.99383 21.4 10.7652C21.4 16.5366 16.7214 21.2152 10.95 21.2152C5.17862 21.2152 0.5 16.5366 0.5 10.7652Z"
                  fill="black"
                />
                <path
                  d="M34.0868 23.4064V9.68699H29.3999V7.48006H41.4811V9.68699H36.7943V23.4064H34.0868Z"
                  fill="black"
                />
                <path
                  d="M43.1856 23.4064V7.02502H45.9158V13.7141C46.295 13.0922 46.8107 12.5992 47.4629 12.2352C48.1151 11.856 48.8508 11.6664 49.6699 11.6664C50.6103 11.6664 51.4066 11.8636 52.0588 12.258C52.711 12.6372 53.204 13.2059 53.5377 13.9643C53.8865 14.7076 54.061 15.6404 54.061 16.7628V23.4064H51.3535V17.0131C51.3535 16.0272 51.1411 15.2764 50.7164 14.7607C50.3069 14.2449 49.6774 13.9871 48.828 13.9871C48.282 13.9871 47.789 14.1236 47.3492 14.3966C46.9093 14.6545 46.5604 15.0337 46.3026 15.5342C46.0447 16.0196 45.9158 16.6187 45.9158 17.3316V23.4064H43.1856Z"
                  fill="black"
                />
                <path
                  d="M61.8755 23.6794C60.7379 23.6794 59.7368 23.4367 58.8723 22.9513C58.0077 22.4508 57.3327 21.7531 56.8474 20.8582C56.362 19.9633 56.1193 18.9318 56.1193 17.7639C56.1193 16.5505 56.3544 15.4887 56.8246 14.5786C57.31 13.6686 57.985 12.9557 58.8495 12.44C59.7293 11.9243 60.7455 11.6664 61.8983 11.6664C63.0207 11.6664 63.999 11.9167 64.8333 12.4172C65.6675 12.9178 66.3121 13.5927 66.7672 14.4421C67.2222 15.2764 67.4497 16.2168 67.4497 17.2634C67.4497 17.415 67.4497 17.5819 67.4497 17.7639C67.4497 17.9459 67.4346 18.1355 67.4042 18.3327H58.076V16.5808H64.6968C64.6664 15.7466 64.3858 15.0944 63.8549 14.6241C63.3241 14.1388 62.6643 13.8961 61.8755 13.8961C61.3143 13.8961 60.7986 14.025 60.3284 14.2829C59.8582 14.5407 59.4866 14.9275 59.2136 15.4432C58.9405 15.9438 58.804 16.5808 58.804 17.3544V18.0142C58.804 18.7271 58.9329 19.3414 59.1908 19.8571C59.4638 20.3728 59.8279 20.7672 60.2829 21.0402C60.7531 21.298 61.2764 21.427 61.8528 21.427C62.4898 21.427 63.0131 21.2904 63.4227 21.0174C63.8474 20.7444 64.1583 20.3804 64.3555 19.9253H67.1312C66.9189 20.6382 66.57 21.2829 66.0846 21.8592C65.5992 22.4205 65.0001 22.8679 64.2872 23.2016C63.5743 23.5201 62.7704 23.6794 61.8755 23.6794Z"
                  fill="black"
                />
                <path
                  d="M69.6065 23.4064V7.48006H79.8904V9.68699H72.3368V14.2601H79.2078V16.4215H72.3368V21.1994H79.8904V23.4064H69.6065Z"
                  fill="black"
                />
                <path
                  d="M82.2139 23.4064V11.9394H84.6256L84.8304 13.8506C85.1792 13.1832 85.6798 12.6523 86.332 12.258C86.9842 11.8636 87.7578 11.6664 88.6527 11.6664C89.5779 11.6664 90.3667 11.8636 91.0189 12.258C91.6711 12.6372 92.1716 13.1984 92.5205 13.9416C92.8845 14.6848 93.0666 15.6101 93.0666 16.7173V23.4064H90.3363V16.9676C90.3363 16.012 90.124 15.2764 89.6993 14.7607C89.2746 14.2449 88.6451 13.9871 87.8109 13.9871C87.2648 13.9871 86.7719 14.116 86.332 14.3739C85.9073 14.6317 85.566 15.0109 85.3082 15.5115C85.0655 15.9968 84.9441 16.5884 84.9441 17.2861V23.4064H82.2139Z"
                  fill="black"
                />
                <path
                  d="M100.586 23.6794C99.5247 23.6794 98.5767 23.4215 97.7424 22.9058C96.9082 22.3901 96.256 21.6772 95.7858 20.7672C95.3307 19.8571 95.1032 18.8257 95.1032 17.6729C95.1032 16.5201 95.3383 15.4963 95.8085 14.6014C96.2787 13.6913 96.9309 12.9784 97.7652 12.4627C98.6146 11.9318 99.5702 11.6664 100.632 11.6664C101.496 11.6664 102.247 11.8333 102.884 12.1669C103.537 12.4855 104.052 12.9405 104.431 13.5321V7.02502H107.162V23.4064H104.704L104.431 21.7455C104.189 22.0792 103.893 22.3977 103.544 22.7011C103.195 22.9893 102.778 23.2244 102.293 23.4064C101.807 23.5884 101.239 23.6794 100.586 23.6794ZM101.155 21.3132C101.807 21.3132 102.384 21.1615 102.884 20.8582C103.385 20.5396 103.772 20.1073 104.045 19.5613C104.318 19.0153 104.454 18.3858 104.454 17.6729C104.454 16.96 104.318 16.3305 104.045 15.7845C103.772 15.2384 103.385 14.8137 102.884 14.5104C102.384 14.207 101.807 14.0554 101.155 14.0554C100.533 14.0554 99.9721 14.207 99.4716 14.5104C98.971 14.8137 98.5767 15.2384 98.2885 15.7845C98.0154 16.3305 97.8789 16.96 97.8789 17.6729C97.8789 18.3858 98.0154 19.0153 98.2885 19.5613C98.5767 20.1073 98.971 20.5396 99.4716 20.8582C99.9721 21.1615 100.533 21.3132 101.155 21.3132Z"
                  fill="black"
                />
                <path
                  d="M110.927 23.5201C110.411 23.5201 109.994 23.3609 109.675 23.0423C109.357 22.7238 109.198 22.3446 109.198 21.9047C109.198 21.4345 109.357 21.0402 109.675 20.7216C109.994 20.4031 110.411 20.2439 110.927 20.2439C111.427 20.2439 111.837 20.4031 112.155 20.7216C112.474 21.0402 112.633 21.4345 112.633 21.9047C112.633 22.3446 112.474 22.7238 112.155 23.0423C111.837 23.3609 111.427 23.5201 110.927 23.5201Z"
                  fill="black"
                />
                <path
                  d="M114.757 23.4064V7.48006H120.49C121.764 7.48006 122.818 7.7 123.653 8.13987C124.487 8.56457 125.109 9.14095 125.518 9.86901C125.928 10.5971 126.132 11.4313 126.132 12.3717C126.132 13.2515 125.935 14.0629 125.541 14.8062C125.147 15.5342 124.532 16.1258 123.698 16.5808C122.864 17.0207 121.794 17.2406 120.49 17.2406H117.487V23.4064H114.757ZM117.487 15.0109H120.331C121.408 15.0109 122.181 14.7758 122.651 14.3056C123.122 13.8202 123.357 13.1756 123.357 12.3717C123.357 11.5375 123.122 10.8853 122.651 10.4151C122.181 9.94485 121.408 9.70974 120.331 9.70974H117.487V15.0109Z"
                  fill="black"
                />
                <path
                  d="M131.075 23.6794C130.135 23.6794 129.354 23.5201 128.732 23.2016C128.11 22.8831 127.647 22.4584 127.344 21.9275C127.04 21.3966 126.889 20.8202 126.889 20.1984C126.889 19.4703 127.071 18.8408 127.435 18.31C127.814 17.7791 128.368 17.3695 129.096 17.0813C129.824 16.778 130.719 16.6263 131.78 16.6263H134.67C134.67 16.0196 134.587 15.5191 134.42 15.1247C134.253 14.7152 133.995 14.4118 133.646 14.2146C133.297 14.0174 132.85 13.9188 132.304 13.9188C131.682 13.9188 131.151 14.0629 130.711 14.3511C130.271 14.6241 129.998 15.0489 129.892 15.6252H127.207C127.298 14.8062 127.571 14.1084 128.026 13.5321C128.481 12.9405 129.081 12.4855 129.824 12.1669C130.582 11.8333 131.409 11.6664 132.304 11.6664C133.381 11.6664 134.298 11.856 135.057 12.2352C135.815 12.5992 136.392 13.1301 136.786 13.8278C137.195 14.5104 137.4 15.337 137.4 16.3078V23.4064H135.079L134.806 21.5635C134.655 21.8668 134.458 22.1474 134.215 22.4053C133.987 22.6631 133.722 22.8907 133.419 23.0878C133.115 23.2699 132.766 23.414 132.372 23.5201C131.993 23.6263 131.561 23.6794 131.075 23.6794ZM131.689 21.518C132.129 21.518 132.516 21.4421 132.85 21.2904C133.199 21.1236 133.494 20.8961 133.737 20.6079C133.995 20.3045 134.192 19.9708 134.329 19.6068C134.465 19.2428 134.556 18.856 134.602 18.4465V18.401H132.076C131.545 18.401 131.105 18.4692 130.757 18.6057C130.408 18.7271 130.157 18.9091 130.006 19.1518C129.854 19.3945 129.778 19.6751 129.778 19.9936C129.778 20.3121 129.854 20.5851 130.006 20.8127C130.157 21.0402 130.377 21.2146 130.666 21.3359C130.954 21.4573 131.295 21.518 131.689 21.518Z"
                  fill="black"
                />
                <path
                  d="M144.686 28.6848C143.609 28.6848 142.661 28.5483 141.842 28.2753C141.038 28.0174 140.408 27.6155 139.953 27.0694C139.513 26.5385 139.294 25.8712 139.294 25.0673C139.294 24.5971 139.407 24.1344 139.635 23.6794C139.878 23.2395 140.234 22.83 140.704 22.4508C141.19 22.0564 141.804 21.7151 142.547 21.427L143.753 22.7466C143.025 23.0044 142.517 23.3154 142.229 23.6794C141.94 24.0434 141.796 24.415 141.796 24.7942C141.796 25.1886 141.918 25.5147 142.16 25.7726C142.418 26.0456 142.759 26.2504 143.184 26.3869C143.624 26.5234 144.117 26.5916 144.663 26.5916C145.194 26.5916 145.656 26.5158 146.051 26.3641C146.445 26.2276 146.749 26.0304 146.961 25.7726C147.188 25.5147 147.302 25.2038 147.302 24.8397C147.302 24.3847 147.143 24.0131 146.824 23.7249C146.506 23.4519 145.876 23.285 144.936 23.2244C144.132 23.1637 143.427 23.0803 142.82 22.9741C142.213 22.8527 141.69 22.7162 141.25 22.5646C140.826 22.4129 140.461 22.246 140.158 22.064C139.855 21.8668 139.604 21.6696 139.407 21.4725V20.9492L141.796 18.4465L143.821 19.1063L141.136 21.7227L141.842 20.4031C141.993 20.5093 142.145 20.6079 142.297 20.6989C142.464 20.7899 142.668 20.8733 142.911 20.9492C143.169 21.0098 143.503 21.0705 143.912 21.1312C144.322 21.1919 144.853 21.2525 145.505 21.3132C146.521 21.389 147.348 21.5711 147.985 21.8592C148.622 22.1474 149.092 22.5342 149.395 23.0196C149.699 23.505 149.85 24.0889 149.85 24.7715C149.85 25.4389 149.661 26.0683 149.282 26.6599C148.918 27.2514 148.356 27.7368 147.598 28.116C146.84 28.4952 145.869 28.6848 144.686 28.6848ZM144.686 19.9708C143.73 19.9708 142.904 19.7888 142.206 19.4248C141.523 19.0456 141 18.5451 140.636 17.9232C140.272 17.2861 140.09 16.5884 140.09 15.83C140.09 15.0564 140.272 14.3587 140.636 13.7368C141 13.1149 141.523 12.6144 142.206 12.2352C142.904 11.856 143.73 11.6664 144.686 11.6664C145.641 11.6664 146.46 11.856 147.143 12.2352C147.825 12.6144 148.349 13.1149 148.713 13.7368C149.077 14.3587 149.259 15.0564 149.259 15.83C149.259 16.5884 149.077 17.2861 148.713 17.9232C148.349 18.5451 147.825 19.0456 147.143 19.4248C146.46 19.7888 145.641 19.9708 144.686 19.9708ZM144.686 17.8549C145.338 17.8549 145.861 17.6805 146.256 17.3316C146.65 16.9828 146.847 16.4822 146.847 15.83C146.847 15.1778 146.65 14.6848 146.256 14.3511C145.861 14.0023 145.338 13.8278 144.686 13.8278C144.034 13.8278 143.503 14.0023 143.093 14.3511C142.684 14.6848 142.479 15.1778 142.479 15.83C142.479 16.4822 142.684 16.9828 143.093 17.3316C143.503 17.6805 144.034 17.8549 144.686 17.8549ZM146.574 13.9416L146.051 11.9394H150.76V13.6458L146.574 13.9416Z"
                  fill="black"
                />
                <path
                  d="M157.641 23.6794C156.504 23.6794 155.503 23.4367 154.638 22.9513C153.774 22.4508 153.099 21.7531 152.613 20.8582C152.128 19.9633 151.885 18.9318 151.885 17.7639C151.885 16.5505 152.12 15.4887 152.59 14.5786C153.076 13.6686 153.751 12.9557 154.615 12.44C155.495 11.9243 156.511 11.6664 157.664 11.6664C158.786 11.6664 159.765 11.9167 160.599 12.4172C161.433 12.9178 162.078 13.5927 162.533 14.4421C162.988 15.2764 163.216 16.2168 163.216 17.2634C163.216 17.415 163.216 17.5819 163.216 17.7639C163.216 17.9459 163.2 18.1355 163.17 18.3327H153.842V16.5808H160.463C160.432 15.7466 160.152 15.0944 159.621 14.6241C159.09 14.1388 158.43 13.8961 157.641 13.8961C157.08 13.8961 156.564 14.025 156.094 14.2829C155.624 14.5407 155.252 14.9275 154.979 15.4432C154.706 15.9438 154.57 16.5808 154.57 17.3544V18.0142C154.57 18.7271 154.699 19.3414 154.957 19.8571C155.23 20.3728 155.594 20.7672 156.049 21.0402C156.519 21.298 157.042 21.427 157.619 21.427C158.256 21.427 158.779 21.2904 159.188 21.0174C159.613 20.7444 159.924 20.3804 160.121 19.9253H162.897C162.685 20.6382 162.336 21.2829 161.85 21.8592C161.365 22.4205 160.766 22.8679 160.053 23.2016C159.34 23.5201 158.536 23.6794 157.641 23.6794Z"
                  fill="black"
                />
              </svg>
            )}
          </div>

          <ul className="menu-items hidden space-x-8 lg:flex">
            {MAIN_NAV_DATA.map((item, index) => (
              <li
                key={index}
                className="menu-items__list interactive-list cursor-pointer transition-all duration-150 hover:text-primary"
              >
                {path === "/" ? (
                  <a href={`#${item.title}`}>{t(item.title)}</a>
                ) : (
                  <Link to={"/"}>{t(item.title)}</Link>
                )}
              </li>
            ))}
          </ul>

          <MenuIcon className="flex size-8 lg:hidden" onClick={handleToogle} />

          <div className="actions hidden items-center space-x-5 lg:flex">
            <SelectTheme />
            <SelectLang />
            <Link to={isAuthenticated ? "/guide" : "/login"}>
              <Button className="ml-6 rounded-full">Commencer</Button>
            </Link>
          </div>
        </div>
      </nav>

      <MenuResponsive isOpen={isOpen} />
    </>
  );
};

export default MainNav;
